---
title: 3.1.9
tags: Searching
date: 2019-02-19 13:11:32
---

# 题目

3.1.9
在 FrequencyCounter 中添加追踪 put() 方法的最后一次调用的代码。
打印出最后插入的那个单词以及在此之前总共从输入中处理了多少个单词。
用你的程序处理 tale.txt 中长度分别大于等于 1、8 和 10 的单词。

# 解答

FrequencyCounter 的官方实现：<https://algs4.cs.princeton.edu/31elementary/FrequencyCounter.java.html>
《双城记》：<https://introcs.cs.princeton.edu/java/data/tale.txt>

对 FrequencyCounter 做修改，在调用 `Put` 方法之前，将单词记录在字符串变量 `lastPut` 中。
在读入单词结束之后输出 `lastPut` 和 `words` 变量。

将末尾的版权信息删除后，得到的结果如下：
![](./1.png)

# 代码

```csharp
public static string MostFrequentlyWord(string filename, int minLength, IST<string, int> st)
{
    int distinct = 0, words = 0;
    StreamReader sr = new StreamReader(File.OpenRead(filename));

    string[] inputs = 
        sr
        .ReadToEnd()
        .Split(new char[] { ' ', '\r', '\n' }, 
        StringSplitOptions.RemoveEmptyEntries);

    string lastPut = "";
    foreach (string s in inputs)
    {
        if (s.Length < minLength)
            continue;
        words++;
        if (st.Contains(s))
        {
            lastPut = s;
            st.Put(s, st.Get(s) + 1);
        }
        else
        {
            lastPut = s;
            st.Put(s, 1);
            distinct++;
        }
    }

    Console.WriteLine("Last Put: " + lastPut + "\t words count: " + words);

    string max = "";
    st.Put(max, 0);
    foreach (string s in st.Keys())
        if (st.Get(s) > st.Get(max))
            max = s;

    return max;
}
```

# 另请参阅

[SymbolTable 库](https://alg4.ikesnowy.com/docs/api/SymbolTable.html)